---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "CANCOM: iam_policy Resource"
description: |-
  Generate a new IAM policy and attach it to users, servicuser and roles)
---

# cancom_iam_policy (Resource)

## Example Usage

Basic usage:

```terraform
resource "cancom_iam_user" "user" {
  name = "test"
}

resource "cancom_iam_policy" "test_policy_azure-app-management" {
  service   = "domdns"
  principal = cancom_iam_user.user.id
  policy {
    profile = "full-access"
  }
}
```

This creates a new policy and assigns it to the selected user.

## Advanced Usage

The `cancom_iam_policy` allows to setup policies using predefined profiles (`policy.profil`). Profile can either be `full-access` or `reader`,
providing either administrative access to the service, or read-only access.

If you want to manage policies on a find-grained basis, you can use `policy.custom` instead:

```terraform
resource "cancom_iam_user" "user" {
  name = "test-user"
}

resource "cancom_iam_policy" "test_policy_azure-app-management" {
  service   = "domdns"
  principal = cancom_iam_user.user.id
  policy {
    custom = {
      createRecords = "*"
      deleteRecords = "*"
      listRecords   = "*"
    }
  }
}
```

You can choose either a `profile` or a `custom` policy.

~> **Note:** `profile` and `custom` are not joined into a single policy. If both are provided, `custom` is prefered over `profile`, and `profile` will be ignored.

~> **Note:** Either `profile` or `custom` must be provided. Otherwise, this resource will fail.


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `policy` (Block List, Min: 1) (see [below for nested schema](#nestedblock--policy))
- `principal` (String) The principal that the policy should be applied to. Can be applied to Users, ServiceUsers, and Roles.
- `service` (String) The service name to provide permissions for.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--policy"></a>
### Nested Schema for `policy`

Optional:

- `custom` (Map of String) Provide a customized policy. If `custom` is set, it is preferred over `profile`
- `profile` (String) Can be set to `reader`, or `full-access`. Applies either reader or administrative access to the service.

